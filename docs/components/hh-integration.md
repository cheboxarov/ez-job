# Интеграция с HeadHunter

Документация интеграции с API HeadHunter.

## Обзор

Система интегрируется с HeadHunter через официальное API для:

- Получения резюме пользователя
- Поиска вакансий
- Отправки откликов на вакансии
- Работы с чатами
- Получения уведомлений

## API HeadHunter

### Публичное API

Используется для:
- Поиска вакансий (`GET /vacancies`)
- Получения деталей вакансий (`GET /vacancies/{id}`)
- Получения резюме (`GET /resumes/{id}`)

**Документация:** [https://github.com/hhru/api](https://github.com/hhru/api)

### Внутреннее API

Используется для:
- Авторизации через код
- Отправки откликов
- Работы с чатами
- Получения списка чатов

**Статус:** Неофициальное API, может изменяться.

## Аутентификация

### Методы аутентификации

1. **OAuth 2.0** — через публичное API
2. **Login by code** — через внутреннее API (используется в проекте)

### Процесс авторизации

1. Пользователь запрашивает OTP код на телефон
2. Получает код в SMS
3. Вводит код в систему
4. Система получает токены доступа
5. Токены сохраняются в БД пользователя

## Основные операции

### Получение резюме

```python
# Получение списка резюме
resumes = await hh_client.get_resumes()

# Получение деталей резюме
resume = await hh_client.get_resume_detail(resume_id)
```

### Поиск вакансий

```python
# Поиск вакансий
vacancies = await hh_client.get_vacancies(
    text="Python developer",
    area=1,  # Москва
    salary=200000
)
```

### Отклик на вакансию

```python
# Отправка отклика
response = await hh_client.respond_to_vacancy(
    vacancy_id="12345678",
    resume_id="87654321",
    cover_letter="Текст письма"
)
```

### Работа с чатами

```python
# Получение списка чатов
chats = await hh_client.get_user_chats()

# Получение деталей чата
chat = await hh_client.get_chat_detail(chat_id)

# Отправка сообщения
await hh_client.send_chat_message(chat_id, "Текст сообщения")
```

## Ограничения и лимиты

### Лимиты API

- **Отклики:** максимум 200 в сутки
- **Запросы:** rate limiting от HeadHunter
- **Чаты:** ограничения на частоту запросов

### Обработка ограничений

Система автоматически:
- Отслеживает лимиты
- Обрабатывает rate limiting
- Повторяет запросы при необходимости

## Безопасность

- Все запросы идут через официальное API
- Токены хранятся безопасно
- Соблюдаются все правила использования API

## Связанные разделы

- [API: HeadHunter Auth](../api/endpoints/hh-auth.md) — эндпоинты авторизации
- [Components: Workers](workers.md) — использование в воркерах
