## `/search/vacancy` (front internal API)

### Назначение

**Внутренний фронтовый эндпоинт поиска вакансий для соискателя.**

Используется SPA/классическим фронтом hh.ru на странице поиска вакансий. Эндпоинт возвращает **крупный JSON с данными для всей страницы**, а не только список вакансий:

- **результаты поиска** и связанные справочники;
- **настройки пользователя и аккаунта**;
- **баланс и состояние резюме**;
- **меню, подвал, языки, переводы (TRL)**;
- **баннеры, эксперименты, фичи, аналитика, пиксели**;
- различные **служебные флаги** для рендера страницы.

Эндпоинт **внутренний**, контракт может меняться без предупреждения, назад‑совместимость не гарантируется.

---

### HTTP‑запрос

- **Метод**: `GET`
- **URL**: `https://{region}.hh.ru/search/vacancy`
  - пример: `https://krasnoyarsk.hh.ru/search/vacancy`
- **Формат ответа**: JSON
  - заголовок `Accept: application/json` обязателен, иначе бэкенд может вернуть HTML‑страницу.
- **XHR**:
  - `X-Requested-With: XMLHttpRequest` (фронтовая эвристика: отличать XHR от обычной навигации).

---

### Авторизация и обязательные заголовки/куки

Эндпоинт **ожидает авторизованного соискателя** и валидный CSRF‑токен. Для воспроизведения в тестах важно переносить реальные куки.

- **Заголовки**:
  - `Accept: application/json` — принудительный JSON‑ответ.
  - `X-Requested-With: XMLHttpRequest` — маркер XHR.
  - `X-Xsrftoken` / `x-xsrftoken` — токен из куки `_xsrf`.
  - `User-Agent` — браузер пользователя (участвует в антибот‑логике, экспериментальных фичах и пр.).
  - `x-static-version` — версия фронта, например `25.51.1` (маппится на нужный ассет‑бандл и конфиг микрофронтендов).

- **Куки** (ключевые):
  - `hhtoken` — сессионный токен авторизации соискателя.
  - `_xsrf` — CSRF‑токен, дублируется в заголовке `x-xsrftoken`.
  - `hhuid`, `crypted_hhuid`, `crypted_id` — идентификаторы пользователя/устройства/сессии.
  - `hhrole=applicant` — роль соискателя.
  - дополнительные служебные куки (эксперименты, AB‑группы, фичфлаги).

**Если нет валидных куки/xsrf**, бэкенд может:

- вернуть редирект (на логин или общую страницу);
- вернуть HTML, а не JSON;
- прервать запрос с ошибкой авторизации.

---

### Query‑параметры

Запрос содержит множество query‑параметров. В документации ниже перечислены **основные и типовые**, которые фиксированно участвуют в поиске и персонализации. Остальные параметры могут добавляться/меняться фронтом по мере развития фич и экспериментов.

#### Базовые параметры поиска

- **`area`** — регион поиска.
  - пример: `113` — Россия.
  - влияет на доступные фильтры (метро, районы, валюту и т.д.).
- **`text`** — поисковый запрос.
  - пример: `Python`;
  - используется в полнотекстовом поиске по вакансиям.
- **`salary`** — зарплата «от», в валюте пользователя.
  - пример: `200000`.
- **`page`** — номер страницы (обычно нумеруется с `0` на уровне API, но фронт может оперировать с `1`).
- **`order_by`** — сортировка результатов:
  - пример: `publication_time` — по дате публикации;
  - возможны другие значения (релевантность, зарплата и т.п.).
- **`resume`** — идентификатор резюме соискателя.
  - пример: `8f4249deff0fab66c70039ed1f46357146416e`;
  - используется для персонализации выдачи и фильтрации «подходящих» вакансий.
- **`searchSessionId`** — UUID текущей сессии поиска.
  - применяется в аналитике и в части персонализационных алгоритмов;
  - должен сохраняться в пределах одного пользовательского сценария поиска.

#### Прочие параметры (типовые группы)

Точный набор зависит от конкретного запроса и версии фронта, но логика одна и та же:

- **Фильтры по вакансии**: опыт, тип занятости, график, форматы работы (офис/удалёнка/гибрид), только с указанной зарплатой, период публикации, профессиональная роль, отрасль и т.п.
- **Геофильтры**: метро, районы, ближайшие города, страны.
- **Поведенческие флаги**: скрытые/черный список работодателей, только новые вакансии, только с быстрым откликом и т.д.
- **Служебные параметры**: источники трафика, эксперименты, экспресс‑поиски, автопоиски, AB‑группы.

Фактический список удобно смотреть в поле `request`/`analyticsParams` в ответе (если нужно отлаживать фронт).

---

### Общая структура ответа

Ответ — **один большой JSON‑объект верхнего уровня**. Ниже перечислены **группы полей** и предназначение ключевых структур. Внутренние свойства, которые носят чисто технический/аналитический характер, описаны агрегировано.

#### Базовая информация о площадке

- **`topLevelSite`**, **`registrationSiteId`**, **`topLevelDomain`**
  - информация о текущем сайте/регионе (`"hh.ru"`, `"13"` и т.п.).
- **`logos`**
  - домены для логотипов:
    - `logoDomain` — основной домен с логотипами;
    - `smallLogoDomain` — домен для компактных логотипов.

#### Баннеры и реклама

- **`banners`**
  - объект, где ключи — **позиции баннеров на странице**:
    - `serp-first-l`, `serp-first-xs`, `serp-second-l`, `under-pagination-search-results-l`, `under-search-results-rotate` и т.п.;
    - суффиксы `-l`, `-m`, `-s`, `-xs` отвечают за брейкпоинты (desktop/tablet/mobile);
    - варианты с `-exp` — экспериментальные размещения (например, для layout `magritte`).
  - каждый баннер представляет собой объект с полями:
    - `id` — идентификатор баннера;
    - `cId` — идентификатор рекламной кампании;
    - `pp`, `p2`, `ps` — внутренние коды позиций/площадок для статистики;
    - `place_settings` — дополнительные настройки (`directSerpExp`, `magritte` и др.);
    - `headerBidding` — размеры и маппинг партнёров:
      - `sizes` — массив `[width, height]`;
      - `biddersMap` — соответствие рекламным сетям/площадкам.

#### Аккаунт и пользователь

- **`account`**
  - данные текущего аккаунта соискателя:
    - `firstName`, `middleName`, `lastName`;
    - `email`;
    - `phone`;
    - дополнительные флаги (верификация почты/телефона и др., см. пример ответа).
- **`hhidAccount`**
  - данные из централизованного аккаунта hhID (по сути, то же лицо, но с точки зрения ID‑центра).
- **`userId`**
  - числовой идентификатор соискателя.
- **`userType`**
  - тип пользователя на странице (`applicant`, `employer`, `anonymous` и др.).
- **`session`**
  - состояние сессии:
    - `isFallback` — фоллбек‑режим (например, отсутствие нужных сервисов);
    - `securityCheckFailed` — признак проблем с безопасностью;
    - `hasExtraAccounts`, `isMultiAccount` — наличие нескольких аккаунтов.

#### Резюме и ограничения

- **`applicantInfo`**
  - агрегированная информация по резюме пользователя:
    - `total` — всего резюме;
    - `finished` — заполненных;
    - `visible` — доступных работодателям;
    - `searchable` — доступных в поиске.
- **`resumeLimits`**
  - лимиты по резюме:
    - `max` — максимум резюме;
    - `remaining` — сколько ещё можно создать.

#### Таргетинг и персонализация

- **`userTargeting`**
  - большой объект с множеством полей вида `puidXX`:
    - финансовые ожидания и валюта (`puid45`, `puid53`, `puid54`, `puid15` и др.);
    - пол, возрастные группы (`puid41`, `puid37`, `puid17`);
    - география (`puid11`, `puid12`, `puid13`, `puid19`, `puid21`, `puid22`, `puid43`);
    - типы занятости/форматы работы (`puid51`, `puid52`);
    - язык интерфейса и фичфлаги (`puid3`, `puid10`) и т.п.
  - фактически, это **таргетинговый профиль пользователя** для рекламы и персонализации поиска.

#### Уведомления пользователя

- **`userNotifications`**
  - список уведомлений в шапке/«колокольчике»:
    - `id`, `userId`;
    - `templateKey` — ключ шаблона;
    - `notificationCode` — тип уведомления;
    - `objectId` — связанный объект (вакансия, отклик и т.п.);
    - `creationTime` / `creationTimeIso`;
    - `viewed`, `isPriority`, `isSupernova` и др.

#### Меню, подвал, дополнительные блоки

- **`headerMenu`**
  - конфигурация верхнего меню сайта для соискателя:
    - массив с пунктами меню: «Поиск работы», «Продвижение резюме», «Сервисы», «Резюме и профиль», «Отклики», «Помощь», «Отзывы о работодателях» и т.д.;
    - каждый пункт содержит:
      - `name` и `translations.name`;
      - `url`;
      - `subItems` (подпункты меню);
      - `analytics` (данные для журналирования кликов);
      - дополнительные флаги: `counter`, `dropdown`, типы выпадения для desktop/mobile.
- **`footer`**, **`socialNetworksLinks`**
  - данные для отрисовки подвала и ссылок на соцсети.
- **`catalogLinks`**
  - ссылки на каталоги вакансий/подборки.

#### Языки, TRL, локаль

- **`langs`**
  - список поддерживаемых языков для данной страницы (в примере: только `"RU"`).
- **`locale` / `countryId`** (если присутствуют)
  - текущая локаль интерфейса и идентификатор страны.
- **`trl`**
  - **глобальный словарь переводов для фронта**:
    - структура: `trl[<langCode>][<key>] = <строка>`;
    - `langCode` — например, `"RU"`;
    - `key` — строковый ключ (`"cookiePolicy.banner.accept"`, `"currency.RUR.label"`, `"clusters.language.degree.a1"` и десятки/сотни других);
    - значение — готовая локализованная строка, иногда с плейсхолдерами (`{0}`, `{age}`, `{currency}` и т.п.).
  - В JSON содержится очень большой список таких ключей (см. пример ответа). На уровне документации важно понимать, что:
    - **контракт поля `trl`** — именно «карта ключей перевода», а не фиксированный набор ключей;
    - фронт должен быть готов к появлению новых ключей, изменению текстов и т.д.

Отдельно в TRL есть блоки, отвечающие за:

- cookie‑баннеры (`cookiePolicy.*`),
- кластеры и фильтры (`clusters.*`),
- валюты (`currency.*`),
- уведомления, онбординги, геймификация активности соискателя и т.п.

#### Мета‑информация страницы

- **`pageMetaData`**
  - SEO‑данные страницы:
    - `title`, `description`;
    - OpenGraph и другие мета‑поля;
    - тексты для social share и пр.
- **`supernovaSearchName`**, **`supernovaSearchArea`**, **`supernovaUserType`**
  - поля, связанные с новым дизайном/интерфейсом поиска «Supernova»:
    - структурированные тексты для описания региона поиска и типов пользователей;
    - используются только в новых раскладках.
- **`isLightPage`**
  - флаг облегчённой версии страницы (минимальный набор блоков, упрощённый UI).
- **`displayType`**
  - тип отображения: `DESKTOP`, `MOBILE`, `WEBVIEW` и т.п.
- **`platformInfo`**, **`webviewAppType`**
  - информация о клиенте (браузер, webview, тип приложения), влияющая на рендер отдельных блоков.

#### Справочники и деревья

- **`currencies`**, **`criteriaCurrencyCode`**
  - список валют и код базовой валюты критериев поиска.
- **`industriesTree`**, **`professionalRoleTree`**
  - деревья отраслей и профессиональных ролей, используемых в фильтрах поиска.
- **`vacancySearchDictionaries`**
  - набор справочников для фильтров (график, тип занятости, опыт, режим работы и пр.).
- **`metroForAreaTree`**
  - дерево станций метро для выбранных регионов.
- **`extraFilters`**
  - дополнительные/экспериментальные фильтры выдачи.

---

### Блок `vacancySearchResult`

`vacancySearchResult` — **основной объект выдачи поиска вакансий**, который содержит:

- фактические критерии, по которым построен текущий результат (`criteria`);
- информацию о сохранённом поиске (`savedSearches`);
- счётчики использованных фильтров и total’ы;
- массив вакансий (`vacancies`) с богатыми сниппетами для карточек;
- вспомогательные структуры (подсказки, кластеры и т.п. — могут добавляться без жёсткого контракта).

#### `vacancySearchResult.savedSearches`

Блок для UI «Сохранить поиск» / «Подписаться на рассылку по этому поиску».

Поля (по примеру):

- **`isSavedSearch`** — сохранён ли этот поиск уже у пользователя.
- **`email`** — почта для рассылки (если уже сохранён с подпиской), иначе `null`.
- **`selectedClusters`** — человекочитаемое представление применённых ключевых фильтров (для заголовков модалки/формы):
  - массив объектов вида `{ name, title }`, где:
    - `name` — машинное имя кластера/фильтра (`"area"`, `"compensation_per_mode"`, `"search_field"`, `"resume"` и т.д.);
    - `title` — текст для показа пользователю ("Россия", "от 200 000 ₽", описание поля поиска, заголовок резюме и т.д.).
- **`isFormOpen`** — развернута ли форма сохранения/редактирования поиска.
- **`isShowButton`** — показывать ли кнопку «Сохранить поиск» в текущем состоянии.
- **`position`** — позиция, в которой блок сохранённого поиска должен отображаться в выдаче (например, после N‑ой вакансии).

#### `vacancySearchResult.criteria`

Снимок **фактических критериев**, с которыми был сделан запрос к поисковому движку (по сути — нормализованный query).

Ключевые группы полей по примеру:

- **Пагинация / базовые параметры**:
  - `page` — номер страницы (в примере `1`).
  - `items_on_page` — количество вакансий в выдаче (в примере `50`).
  - `limit`, `offset` — низкоуровневые параметры постраничного вывода (`-1` при отсутствии явного ограничения).
  - `clusters` — флаг, запрашивались ли кластеры (true/false).
- **Регион и гео**:
  - `area` — массив кодов регионов (в примере `[113]`).
  - `district`, `metro` — списки районов и станций метро.
  - `bottom_left_lat` / `bottom_left_lng` / `top_right_lat` / `top_right_lng` — bounding box для гео‑поиска.
  - `sort_point_lat` / `sort_point_lng` — точка, относительно которой сортируется по расстоянию.
  - `geocode_type`, `geohash`, `polygon` — дополнительные параметры геопоиска (геокодирование, полигоны и т.п.).
  - `main_area` — основной регион (если отличается от списка area).
- **Поисковый текст и поля**:
  - `text` — строка запроса (в примере `"Python"`).
  - `search_field` — список полей, по которым ведётся поиск (`"name"`, `"company_name"`, `"description"` и др.).
  - `excluded_text` — слова/фразы, которые нужно исключить из поиска.
- **Зарплата**:
  - `salary` — минимальное значение (в примере `200000`).
  - `currency_code` — валюта (`"RUR"`).
  - `salary_frequency` — частота выплат (раз в месяц, неделя и т.д.).
  - `salary_mode` — режим (за месяц, смену, час и т.п.).
  - `only_with_salary` — искать только вакансии с указанной зарплатой.
- **Фильтры по вакансии**:
  - `employment` — массив типов занятости (полная, частичная, проектная и т.п.).
  - `schedule` — график работы (полный день, сменный, гибкий и др.).
  - `part_time` / `is_part_time_clusters_enabled` — частичная занятость и связанные кластеры.
  - `experience` — массив уровней опыта.
  - `employment_form` — формат оформления.
  - `work_schedule_by_days`, `work_format`, `working_hours` — детализированные настройки формата/графика.
  - `accept_temporary` — допуск временной работы.
- **Резюме и персонализация**:
  - `resume` — id резюме, на базе которого строится персонализация.
  - `recommended_by_uid` — искать ли рекомендованные по пользователю вакансии.
  - `enable_snippets` — включить ли сниппеты в выдаче.
  - `no_magic` — отключить ли «магические» улучшения (подборы, рекомендации и пр.).
- **Статус вакансий**:
  - `exclude_archived` — исключать архивные.
  - `exclude_closed` — исключать закрытые.
  - `search_period` — ограничение по давности публикации.
- **Работодатели**:
  - `employer_id` — ограничение поиска одной компанией.
  - `excluded_employer_id` — исключить работодателей.
  - `employer_manager_id` — поиск по менеджеру.
- **Образование и профиль**:
  - `professional_role` — профессиональные роли.
  - `industry` — отрасли.
  - `education` — требуемый уровень образования.
- **Служебные флаги**:
  - `control_flag` — массив строк‑флагов для тонкой настройки поиска (например, `"vacancyBlacklistJoinEnabled:True"`, `"vrRatesBoostDisabled:True"`, `"antifraudPessimizationEnabledFlag:True"` и т.п.).
  - `saved_search_id` — id сохранённого поиска, если поиск запущен по нему.
  - `search_session_id` — id поисковой сессии.
  - `vacancy_id` — если поиск делался вокруг конкретной вакансии (similar vacancies и пр.).
  - `search_debug` — включить ли режим дебага.
  - `ored_clusters` — режим комбинирования кластеров.
  - `cache_ttl_sec` — таймаут кэширования.
  - `precision` — требуемая точность поиска.
  - `use_relations_for_similar` — использовать ли связи (например, похожие вакансии по связанным объектам).
  - `mixing_neighbours` — настройки микширования соседних результатов.

#### `vacancySearchResult.totalUsedFilters`

- **`totalUsedFilters`** — числовой счётчик, сколько фильтров (кроме базового текста/региона) реально задействовано.
  - используется UI, чтобы показывать бейдж «Фильтры (N)» и т.п.

#### `vacancySearchResult.vacancies`

Основной массив **карточек вакансий** для выдачи. Каждая запись — уже готовый к рендеру сниппет, без необходимости дополнительного запроса.

Ниже — разбор типовой структуры по примеру (часть полей может отсутствовать/добавляться в зависимости от конфигурации):

- **Служебные атрибуты карточки** (префикс `@` — псевдо‑атрибуты):
  - `@workSchedule` — код графика работы для этой вакансии (`"fullDay"` и др.).
  - `@showContact` — можно ли показывать контактные данные работодателя.
  - `@responseLetterRequired` — требуется ли сопроводительное письмо.

- **Идентификация и базовая информация**:
  - `vacancyId` — числовой id вакансии.
  - `name` — название вакансии.
  - `links` — объект с URL‑ами:
    - `desktop` — ссылка на полное описание вакансии на desktop‑версии;
    - `mobile` — ссылка на mobile‑версию.

- **Компания (`company`)**:
  - атрибуты:
    - `@showSimilarVacancies` — можно ли строить блок «Похожие вакансии этого работодателя».
    - `@trusted` — доверенный/проверенный работодатель.
    - `@category` — внутренняя категория работодателя.
    - `@countryId` — страна.
    - `@state` — состояние модерации (например, `"APPROVED"`).
  - поля:
    - `id` — id работодателя.
    - `name` — фактическое имя компании (или контактного лица).
    - `visibleName` — имя для отображения.
    - `companySiteUrl` — ссылка на сайт компании.
    - `accreditedITEmployer` — флаг IT‑аккредитации.

- **Компенсация (`compensation`)**:
  - несколько вариантов вложенных структур (в примере — `noCompensation: {}`):
    - `noCompensation` — зарплата не указана;
    - могут быть другие варианты (`from`, `to`, `currency`, частота, режим и др.) в зависимости от конкретной вакансии.

- **Время и статусы**:
  - `publicationTime` — объект:
    - `@timestamp` — unix‑timestamp;
    - `$` — ISO‑строка.
  - `lastChangeTime` — аналогичный объект с последним моментом изменения.
  - `creationTime` — строка ISO с временем создания вакансии.
  - `creationSite` / `creationSiteId` — площадка, где вакансия была создана.
  - `displayHost` — хост, на котором показывается вакансия (в примере: `krasnoyarsk.hh.ru`).

- **Регион/город (`area`) и адрес (`address`)**:
  - `area`:
    - `@id` — id региона/города;
    - `name` — название ("Москва");
    - `path` — путь в дереве регионов (".113.232.1.").
  - `address`:
    - `@id` — id адреса;
    - `@disabled`, `@wrong` — флаги валидности;
    - `city`, `street`, `building` — текстовые поля адреса;
    - `displayName` — уже собранная строка для отображения;
    - `mapData` — сериализованный JSON с координатами/зумом;
    - `marker` — объект `{ @lat, @lng }` с координатами;
    - `manager` — объект с `@id` менеджера, привязанного к адресу;
    - `districtDto` — объект с `id`, `name`, `isMicroDistrict` (район города).

- **Настройки коммуникаций и откликов**:
  - `acceptTemporary` — разрешена ли временная работа;
  - `acceptIncompleteResumes` — можно ли откликаться с неполным резюме;
  - `inboxPossibility` — можно ли отправить отклик (входящие);
  - `chatWritePossibility` — состояние чата (`ENABLED_AFTER_INVITATION`, `DISABLED` и др.);
  - `notify` — включены ли уведомления по этой вакансии;
  - `employerManager` — объект, содержащий инфу о менеджере (в примере `latestActivity: "offline"`).

- **Рабочие условия (массивы‑заглушки)**:
  - `driverLicenseTypes`, `languages`, `workingDays`, `workingTimeIntervals`, `workingTimeModes` — массивы, которые при наличии данных содержат конкретные значения/коды, а в примере представлены пустыми объектами `{}` как заглушки.
  - Эти массивы используются для построения тэгов/плашек в карточке.

- **`vacancyProperties`** — свойства/услуги, подвешенные к вакансии (тарифы, промо‑пакеты и т.п.):

  Структура по примеру:

  - `properties` — массив элементов, каждый из которых содержит `property`:
    - `property` — массив объектов:
      - `id` — id свойства.
      - `propertyType` — тип (`HH_STANDARD_PLUS`, `HH_AUTO_RENEWAL` и др.).
      - `bundle` — пакет (обычно `"HH"`).
      - `defining`, `classifying` — флаги, определяющие влияние свойства.
      - `propertyWeight` — вес/приоритет.
      - `parameters` — массив объектов `parameter`, где каждый `parameter` — это:
        - `key` / `value` (например, `"packageName": "RENEWAL_VP"`, `"serviceId": "65061094"`, `"intervalMinutes": "4320"`).
      - `startTimeIso` / `endTimeIso` — временные границы действия свойства/услуги.

- **`vacancyPlatforms`** (дальше по JSON, для каждой вакансии):
  - массив платформ, на которых опубликована вакансия;
  - типовая структура элемента:
    - `vacancyId` — id вакансии, на которую относится платформа;
    - вложенный объект с `@type: "vacancyPage"` и дополнительными параметрами (например, URL, тип площадки и т.д.).

> Внутри массива `vacancies` для разных вакансий могут встречаться дополнительные поля: требования, обязанности, ключевые навыки, индикаторы «подходит по резюме», брендовые блоки и т.п. Структура в целом следует общей модельке вакансии hh, но в сжатом/адаптированном под сниппеты виде.

---

### Остальные поля ответа (кратко)

Нижеперечисленные блоки описаны укрупнённо, т.к. они менее критичны для понимания логики поиска, но важны для полного рендера страницы.

#### Поведение UI и фичи

- **`features`**, **`experiments`**
  - фичфлаги и AB‑эксперименты, включая `Supernova`, `Magritte` и др.
- **`isUseMagritteLayout`**
  - отдельный флаг использования layout `Magritte` для страницы поиска.
- **`mainContentVisible`**
  - флаг, можно ли отображать основной контент (используется для preloader’ов и проверок).
- **`enableVacancySnippets`**, **`isVacancyBrandedSnippetAllowed`**
  - флаги наличия/возможности показов сниппетов (в т.ч. брендированных вакансий).
- **`brandedEmployers`**
  - данные о работодателях с брендовым оформлением.
- **`vacancyWizard`**
  - конфигурация мастера/пошаговых сценариев поиска вакансий.
- **`chatBot`**, **`chatik`**, **`chatikFloatActivator`**
  - настройки и включённость различных чат‑виджетов.
- **`smartScript`**, **`stayInTouch`**
  - конфигурации для доп. виджетов/скриптов взаимодействия с пользователем.
- **`resumeCountriesVisibilityAgreemetsModalEnabled`**, **`resumeCountriesVisibilityAgreements`**
  - настройки модалки и текстов согласий на трансграничную видимость резюме.
- **`langSelectionModal`**
  - конфигурация выбора языка интерфейса.

#### Аналитика, счётчики, пиксели

- **`analyticsParams`**
  - собранные параметры для логирования/аналитики (источник трафика, кампании, реферы и пр.).
- **`counters`**
  - счётчики для внутренней и внешней аналитики.
- **`notLuxData`**, **`adsSearchParams`**
  - служебные параметры для рекламных систем и таргетинга.
- **`facebook`**, **`iapsdk`**, **`mytracker`**, **`vkTargeting`**, **`yandex`**, **`hybrid`**, **`targetAds`**, **`tgPixel`** (набор пиксельных полей внизу ответа)
  - конфигурации трекинг‑пикселей/SDK:
    - каждый ключ — отдельная система (Facebook, MyTracker, VK‑ретаргетинг, Яндекс и т.п.);
    - значение — массив объектов с полями вида `id`, `type` и др.;
    - фронт по ним инициализирует соответствующие пиксели и события.

#### Прочие служебные поля

- **`account`/`hhid`/`config`/`sharedRemoteEntry`/`microFrontends`**
  - низкоуровневые настройки ядра hhID, конфиг фронта, реестр микрофронтендов (host/remote, версии, entry‑точки).
- **`contactPhones`**, **`messengers`**
  - справочные контактные данные службы поддержки.
- **`renderRestriction`**
  - флаги ограничения рендеринга (AB‑тесты, режимы упрощённой страницы и т.д.).
- **`applicantSignup`**, **`anonymousUserType`**
  - состояние регистрации/типа анонимного пользователя.
- **`userStats`**
  - агрегированная статистика активности пользователя (количество откликов, просмотров и т.п.).
- **`userLabelsForVacancies`**
  - пользовательские метки и статусы по вакансиям (просмотрено, избранное, скрыто и т.п.).
- **`stayInTouch`**, **`smartScript`**, **`novaSorts`**
  - отдельные экспериментальные/маркетинговые блоки и новые сортировки.
- **`isSetkaBannerShowOnSearchVacancy`**
  - флаг показа отдельного типа баннера.
- **`searchCatalogRedirect`**
  - правила и флаги редиректа из поиска в каталог вакансий.
- **`applicantSignup`**, **`isCookiesPolicyInformerVisible`**, **`cookiePolicy`‑поля в TRL**
  - управление модалками регистрации и информером о cookie.
- **`sentryExtraData`**
  - дополнительные данные для отправки в Sentry при фронтовых ошибках.

#### Ошибки

- **`errorCode`**
  - код ошибки верхнего уровня:
    - `null` или отсутствие поля — успешный сценарий;
    - ненулевое значение — тип ошибки (например, проблемы авторизации, внутренние ошибки поиска и т.п. — конкретные значения зависят от бэкенда).

---

### Особенности и рекомендации по использованию

- Эндпоинт **внутренний**, его контракт может меняться без анонсов.
- Большая часть полей — это **мета‑данные для фронта**, а не бизнес‑контракт «поиска вакансий» в классическом API‑понимании.
- Для воспроизведения запросов в тестах/дебаге необходимо:
  - перенести реальные авторизационные куки (`hhtoken`, `hhuid`, `crypted_id` и др.);
  - корректно передавать `_xsrf` и `x-xsrftoken`;
  - сохранять `searchSessionId` в рамках одной сессии поиска;
  - учитывать, что часть поведения зависит от экспериментов и фичфлагов.
- При чтении ответа рекомендуется:
  - сначала ориентироваться по верхнеуровневым блокам (поиск, пользователь, резюме, меню, справочники);
  - затем прицельно смотреть нужные вложенные структуры (например, `trl["RU"]` или конкретный кластер выдачи).
