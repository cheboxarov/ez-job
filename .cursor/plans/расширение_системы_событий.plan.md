# –ü–ª–∞–Ω: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π (—Ñ–æ—Ä–º—ã –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è)

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π (event_type –≤ create_event)

- `call_request` - –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–≤–æ–Ω/—Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ
- `external_action_request` - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –≤–Ω–µ —á–∞—Ç–∞ (–æ–±—â–∏–π —Ç–∏–ø)
- `question_answered` - –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ–±–ª–µ–º–∞

–°–µ–π—á–∞—Å `external_action_request` - —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–π —Ç–∏–ø. –ù—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## –¶–µ–ª–∏

1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π: **–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã** –∏ **—Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ**
2. –î–æ–±–∞–≤–∏—Ç—å **—Å—Ç–∞—Ç—É—Å—ã** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
3. –°–æ–∑–¥–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è–º–∏
4. –û–±–µ—Å–ø–µ—á–∏—Ç—å **–Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ —á–∞—Ç** –∏ **–ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–∞–º**

---

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: Backend - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### 1.1 –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

**–§–∞–π–ª:** `backend/domain/entities/agent_action.py`

–ù–æ–≤—ã–µ `event_type` –¥–ª—è `create_event`:

- `fill_form` - –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É/–∞–Ω–∫–µ—Ç—É
- `test_task` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ

#### 1.2 –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è

**–§–∞–π–ª:** `backend/domain/entities/agent_action.py`

–î–æ–±–∞–≤–∏—Ç—å –≤ `data` –¥–ª—è —Å–æ–±—ã—Ç–∏–π —Ç–∏–ø–∞ `fill_form` –∏ `test_task`:

```python
{
    "dialog_id": int,
    "event_type": "fill_form" | "test_task",
    "message": str,           # –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
    "link": str | None,       # –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ä–º—É/–∑–∞–¥–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    "status": "pending" | "completed" | "declined"  # –ù–æ–≤–æ–µ –ø–æ–ª–µ!
}
```

#### 1.3 –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î

**–§–∞–π–ª:** `backend/infrastructure/database/migrations/versions/xxx_add_event_status.py`

–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSONB –ø–æ–ª–µ `data`, –∫–æ—Ç–æ—Ä–æ–µ —É–∂–µ –≥–∏–±–∫–æ–µ.

---

### –≠—Ç–∞–ø 2: Backend - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

#### 2.1 –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç messages_agent

**–§–∞–π–ª:** `backend/infrastructure/agents/messages_agent.py`

–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è:

```
–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ external_action_request –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

fill_form - –∫–æ–≥–¥–∞ –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ—Å–∏—Ç:
 - –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É
 - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
 - –ü—Ä–æ–π—Ç–∏ –æ–ø—Ä–æ—Å–Ω–∏–∫
 - –û—Å—Ç–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Google Forms –∏ —Ç.–ø.

test_task - –∫–æ–≥–¥–∞ –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ—Å–∏—Ç:
 - –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
 - –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
 - –†–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É
 - –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–±–Ω—É—é —Ä–∞–±–æ—Ç—É
```

#### 2.2 –î–æ–±–∞–≤–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫

–í –ø—Ä–æ–º–ø—Ç–µ —É–∫–∞–∑–∞—Ç—å –∞–≥–µ–Ω—Ç—É:

- –ï—Å–ª–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ (URL), –∏–∑–≤–ª–µ—á—å –µ—ë –≤ –ø–æ–ª–µ `link`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ Google Forms, Typeform, –≤–Ω–µ—à–Ω–∏–µ —Å–∞–π—Ç—ã –∏ —Ç.–¥.

#### 2.3 –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞

**–§–∞–π–ª:** `backend/infrastructure/agents/messages_agent.py` –º–µ—Ç–æ–¥ `_parse_response()`

–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ–ª—è `link`.

---

### –≠—Ç–∞–ø 3: Backend - API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–º

#### 3.1 –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

**–§–∞–π–ª:** `backend/presentation/routers/agent_actions_router.py`

```python
@router.patch("/{action_id}/status")
async def update_action_status(
    action_id: UUID,
    status: Literal["pending", "completed", "declined"],
    current_user: User = Depends(get_current_user),
) -> AgentActionResponse:
    """–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è (–¥–ª—è fill_form –∏ test_task)"""
```

#### 3.2 Use Case –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

**–§–∞–π–ª:** `backend/domain/use_cases/update_agent_action_status.py`

```python
class UpdateAgentActionStatusUseCase:
    async def execute(
        self,
        action_id: UUID,
        status: str,
        user_id: UUID
    ) -> AgentAction:
        # 1. –ü–æ–ª—É—á–∏—Ç—å action –ø–æ id
        # 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç—Ç–æ fill_form –∏–ª–∏ test_task
        # 3. –û–±–Ω–æ–≤–∏—Ç—å data["status"]
        # 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
```

#### 3.3 –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Å—Ç–∞—Ç—É—Å—É

**–§–∞–π–ª:** `backend/infrastructure/database/repositories/agent_action_repository.py`

–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `statuses: list[str] | None `–≤ –º–µ—Ç–æ–¥ `list()`:

```python
async def list(
    ...
    statuses: list[str] | None = None,  # ["pending", "completed", "declined"]
) -> List[AgentAction]:
    # –§–∏–ª—å—Ç—Ä: data->>'status' IN (statuses)
```

#### 3.4 –û–±–Ω–æ–≤–∏—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–ø–∏—Å–∫–∞

**–§–∞–π–ª:** `backend/presentation/routers/agent_actions_router.py`

–î–æ–±–∞–≤–∏—Ç—å query –ø–∞—Ä–∞–º–µ—Ç—Ä `statuses`:

```python
@router.get("")
async def list_agent_actions(
    ...
    statuses: list[str] | None = Query(None),
):
```

---

### –≠—Ç–∞–ø 4: Frontend - –¢–∏–ø—ã –∏ API

#### 4.1 –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã

**–§–∞–π–ª:** `frontend/src/types/api.ts`

```typescript
export type EventType =
  | 'call_request'
  | 'external_action_request'
  | 'question_answered'
  | 'fill_form'      // –ù–æ–≤—ã–π
  | 'test_task';     // –ù–æ–≤—ã–π

export type EventStatus = 'pending' | 'completed' | 'declined';

export interface AgentAction {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  data: {
    dialog_id: number;
    event_type?: EventType;
    message?: string;
    link?: string;           // –ù–æ–≤–æ–µ - —Å—Å—ã–ª–∫–∞
    status?: EventStatus;    // –ù–æ–≤–æ–µ - —Å—Ç–∞—Ç—É—Å
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  };
}
```

#### 4.2 –û–±–Ω–æ–≤–∏—Ç—å API –∫–ª–∏–µ–Ω—Ç

**–§–∞–π–ª:** `frontend/src/api/agentActions.ts`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
export const updateAgentActionStatus = async (
  actionId: string,
  status: EventStatus
): Promise<AgentAction> => {
  const response = await api.patch(`/agent-actions/${actionId}/status`, { status });
  return response.data;
};

// –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø–∏—Å–∫–∞
export interface GetAgentActionsParams {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  statuses?: EventStatus[];
}
```

---

### –≠—Ç–∞–ø 5: Frontend - –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–ó–∞–¥–∞–Ω–∏—è"

#### 5.1 –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É TasksPage

**–§–∞–π–ª:** `frontend/src/pages/TasksPage.tsx`

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** "–ó–∞–¥–∞–Ω–∏—è" –∏–ª–∏ "–¢—Ä–µ–±—É—é—Ç –¥–µ–π—Å—Ç–≤–∏—è"
2. **–¢–∞–±—ã/—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É:**

      - –û–∂–∏–¥–∞—é—Ç (pending) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      - –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ (completed)
      - –û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ (declined)
      - –í—Å–µ

3. **–ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞–Ω–∏—è:**
   ```
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ üìù –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É          [—Å—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–µ—Ç]  ‚îÇ
   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
   ‚îÇ –ö–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ—Å–∏—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É –¥–ª—è...        ‚îÇ
   ‚îÇ                                                 ‚îÇ
   ‚îÇ üîó –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–æ—Ä–º–µ    üí¨ –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç           ‚îÇ
   ‚îÇ                                                 ‚îÇ
   ‚îÇ [‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ]  [‚úó –û—Ç–∫–∞–∑–∞—Ç—å—Å—è]                  ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ```

4. **–î–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ:**

      - –ö–ª–∏–∫ –ø–æ —Å—Å—ã–ª–∫–µ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
      - "–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç" ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/chat/{dialog_id}`
      - "–í—ã–ø–æ–ª–Ω–µ–Ω–æ" ‚Üí PATCH —Å—Ç–∞—Ç—É—Å = completed
      - "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è" ‚Üí PATCH —Å—Ç–∞—Ç—É—Å = declined

5. **–ò–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø—É:**

      - `fill_form` ‚Üí üìù –∏–ª–∏ –∏–∫–æ–Ω–∫–∞ —Ñ–æ—Ä–º—ã
      - `test_task` ‚Üí üìã –∏–ª–∏ –∏–∫–æ–Ω–∫–∞ –∑–∞–¥–∞–Ω–∏—è

#### 5.2 –°–æ–∑–¥–∞—Ç—å store –¥–ª—è –∑–∞–¥–∞–Ω–∏–π

**–§–∞–π–ª:** `frontend/src/stores/tasksStore.ts`

```typescript
interface TasksState {
  tasks: AgentAction[];
  loading: boolean;
  statusFilter: EventStatus | 'all';

  fetchTasks(): Promise<void>;
  setStatusFilter(status: EventStatus | 'all'): void;
  updateTaskStatus(taskId: string, status: EventStatus): Promise<void>;
}
```

#### 5.3 –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç

**–§–∞–π–ª:** `frontend/src/App.tsx` –∏–ª–∏ —Ä–æ—É—Ç–µ—Ä

```typescript
<Route path="/tasks" element={<TasksPage />} />
```

#### 5.4 –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

**–§–∞–π–ª:** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (Sidebar/Header)

–î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é "–ó–∞–¥–∞–Ω–∏—è" —Å –±–µ–π–¥–∂–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ pending.

---

### –≠—Ç–∞–ø 6: Frontend - –û–±–Ω–æ–≤–∏—Ç—å EventsPage

#### 6.1 –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –≤ —Ñ–∏–ª—å—Ç—Ä—ã

**–§–∞–π–ª:** `frontend/src/pages/EventsPage.tsx`

–î–æ–±–∞–≤–∏—Ç—å –≤ UI —Ñ–∏–ª—å—Ç—Ä–æ–≤:

- `fill_form` - "–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã"
- `test_task` - "–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ"

#### 6.2 –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫

–î–ª—è —Å–æ–±—ã—Ç–∏–π `fill_form` –∏ `test_task`:

- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –µ—Å–ª–∏ –µ—Å—Ç—å
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å (—Ü–≤–µ—Ç–Ω–æ–π –±–µ–π–¥–∂)
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É /tasks

---

### –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 7.1 Unit —Ç–µ—Å—Ç—ã

- –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π –≤ messages_agent
- –¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
- –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

#### 7.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

- API —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è fill_form/test_task
- API —Ç–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- API —Ç–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É

#### 7.3 E2E —Ç–µ—Å—Ç—ã

- –°—Ü–µ–Ω–∞—Ä–∏–π: –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è ‚Üí –ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –°—Ü–µ–Ω–∞—Ä–∏–π: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è/—Å–æ–∑–¥–∞–Ω–∏—è

### Backend (–∏–∑–º–µ–Ω–∏—Ç—å)

- `backend/infrastructure/agents/messages_agent.py` - –Ω–æ–≤—ã–µ —Ç–∏–ø—ã + –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
- `backend/infrastructure/database/repositories/agent_action_repository.py` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `backend/domain/interfaces/agent_action_repository_port.py` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `backend/application/services/agent_action_service.py` - –º–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- `backend/domain/interfaces/agent_action_service_port.py` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `backend/presentation/routers/agent_actions_router.py` - –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç

### Backend (—Å–æ–∑–¥–∞—Ç—å)

- `backend/domain/use_cases/update_agent_action_status.py` - use case

### Frontend (–∏–∑–º–µ–Ω–∏—Ç—å)

- `frontend/src/types/api.ts` - –Ω–æ–≤—ã–µ —Ç–∏–ø—ã
- `frontend/src/api/agentActions.ts` - –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
- `frontend/src/pages/EventsPage.tsx` - –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- `frontend/src/App.tsx` - –Ω–æ–≤—ã–π —Ä–æ—É—Ç
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ - –Ω–æ–≤—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é

### Frontend (—Å–æ–∑–¥–∞—Ç—å)

- `frontend/src/pages/TasksPage.tsx` - –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `frontend/src/stores/tasksStore.ts` - store –¥–ª—è –∑–∞–¥–∞–Ω–∏–π

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **Backend: –ú–æ–¥–µ–ª—å –∏ –∞–≥–µ–Ω—Ç** (–≠—Ç–∞–ø—ã 1-2)

      - –û–±–Ω–æ–≤–∏—Ç—å –∞–≥–µ–Ω—Ç —Å –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏
      - –î–æ–±–∞–≤–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
      - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞

2. **Backend: API** (–≠—Ç–∞–ø 3)

      - –°–æ–∑–¥–∞—Ç—å use case –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
      - –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç
      - –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é

3. **Frontend: –¢–∏–ø—ã –∏ API** (–≠—Ç–∞–ø 4)

      - –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã
      - –û–±–Ω–æ–≤–∏—Ç—å API –∫–ª–∏–µ–Ω—Ç

4. **Frontend: –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (–≠—Ç–∞–ø 5)

      - –°–æ–∑–¥–∞—Ç—å TasksPage
      - –°–æ–∑–¥–∞—Ç—å store
      - –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

5. **Frontend: –û–±–Ω–æ–≤–∏—Ç—å Events** (–≠—Ç–∞–ø 6)

      - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –≤ —Ñ–∏–ª—å—Ç—Ä—ã
      - –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–≠—Ç–∞–ø 7)

---

## –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. **–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** "–ó–∞–¥–∞–Ω–∏—è", "–î–µ–π—Å—Ç–≤–∏—è", "–¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è"?
2. **–ù—É–∂–Ω–æ –ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å `external_action_request`** –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ?
3. **–ù—É–∂–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (push/email) –æ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏—è—Ö?
4. **–î–µ–¥–ª–∞–π–Ω—ã:** –Ω—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ —Å—Ä–æ–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è?